{% set repos_count = repos|count %}
{% if repos_count > 1 %}
<ul class="timeline">
{% for repo in repos %}
<li>
  <div class="{{ loop.cycle('direction-r', 'direction-l')}}">
    <div class="flag-wrapper">
      <span class="flag"><a target="_blank" href="{{ repo.html_url }}">{{repo.name}}</a></span>
      <span class="time-wrapper"><span class="time">{{repo.created_at|format_date}}</span></span>
    </div>
    <div class="desc">{{repo.description}}</div>
  </div>
</li>
{% endfor %}
</ul>
{% endif %}
{% if repos_count == per_page %}
<div id="load-more" hx-swap-oob="true">
  <button class="button" type="button"
    _="on click toggle [@disabled=true] until htmx:afterOnLoad"
    hx-get="/more?user={{user}}&page={{page}}"
    hx-target="#timeline" hx-swap="beforeend"
    hx-indicator="#indicator-bottom">Fetch More</button>
  <div id="indicator-bottom" class="htmx-indicator">
    <h3>Loading repos, please wait...</h3>
  </div>
</div>
{% else %}
<div id="load-more" hx-swap-oob="true">
  <button class="button" type="button" _="on click toggle .big-text">That's all Folks!</button>
</div>
{% endif %}
